(function(h){var i=h.localStorage,f=h.JSON.stringify,m=h.JSON.parse;h=h["10kse"]={};h.get=function(c){return(c=i.getItem(c))?m(c):c};h.set=function(c,o){return i.setItem(c,f(o))}})(window);
(function(h){h.scanner=function(i,f){function m(p,t){var r;if(p.currentStyle)r=p.currentStyle[t];else if(i.getComputedStyle)r=o.getComputedStyle(p,null).getPropertyValue(t);return r}function c(p){return m(p,"display")!=="none"&&m(p,"visiblity")!=="hidden"}var o=f.defaultView,j,a,d,b,g=f.getSelection()||"",e="h1,h2,h3,h4,h5,h6,pre,code".split(","),n=[],k,l;j=0;for(d=e.length;j<d;j++){k=f.getElementsByTagName(e[j]);a=0;for(b=k.length;a<b;a++){l=k[a];c(l)&&n.push(l.textContent)}}a=[];b=[f.body];var q,
s;e=/[a-z][a-z][a-z]/i;for(k=/button|link|noscript|script|style/i;j=b.shift();){l=j.childNodes;j=0;for(d=l.length;j<d;j++){q=l[j];s=q.nodeType;if(s===1&&!k.test(q.tagName)&&c(q))b[b.length]=q;else if(s===3){text=q.nodeValue;if(e.test(text))a[a.length]=text}}}i["10kse"].iframe.contentWindow.postMessage(JSON.stringify({url:f.location.href,selection:g,title:f.title,priority:n.join(" "),content:a.join(" ")}),"*")}})(window["10kse"]);
(function(h){function i(a){var d,b,g,e=0,n={},k;b=a.split(o);a=0;for(d=b.length;a<d;a++){e++;g=b[a];if(g.length>2&&!j.test(g)){g=g.toLowerCase();(k=n[g])||(k=n[g]=[]);k[k.length]=e}}return n}function f(a,d,b){if(b&&/[a-z]/i.test(b)){b=i(b);var g,e,n;for(g in b){e=m("W-"+g)||{};(n=e[a])||(n=e[a]={});n[d]=b[g];c("W-"+g,e)}}}var m=h.get,c=h.set,o=/[^0-9a-z_]+/i,j=/able|about|across|after|all|almost|also|among|and|any|are|because|been|but|can|cannot|could|dear|did|does|either|else|ever|every|for|from|get|got|had|has|have|her|hers|him|his|how|however|into|its|just|least|let|like|likely|may|might|most|must|neither|nor|not|off|often|only|other|our|own|rather|said|say|says|she|should|since|some|than|that|the|their|them|then|there|these|they|this|tis|too|twas|wants|was|were|what|when|where|which|while|who|whom|why|will|with|would|yet|you|your/i;
h.extract=i;h.indexer=function(a){var d,b=m("URL-"+a.url);if(b){d=b.id;if(a.content!==b.text||a.title!==b.title)c("URL-"+a.url,{id:d,text:a.content,title:a.title})}else{d=m("COUNT")||0;c("ID-"+d,a.url);c("COUNT",d+1);c("URL-"+a.url,{id:d,text:a.content,title:a.title})}f(d,"s",a.selection);f(d,"t",a.title);f(d,"p",a.priority);f(d,"c",a.content)}})(window["10kse"],window);
(function(h,i,f,m){var c=m.get,o=m.set,j=i.location.href;c=c("key");if(!c){c=Math.random();o("key",c)}j=JSON.stringify(j.replace(/#.*|$/,"#"+c));f("#add").attr("href",("javascript:("+function(a,d,b){var g=a["10kse"];g||(g=a["10kse"]={});if(g.scanner)return g.scanner();a.addEventListener("message",function(k){if(b.substr(0,k.origin.length)===k.origin){g.scanner=new Function(k.data);g.scanner()}},false);var e=g.iframe=d.createElement("iframe");a=e.style;e.setAttribute("src",b);a.width=a.height="1px";
a.top=a.left="-2px";a.border="none";a.position="absolute";var n=false;e.onload=e.onreadystatechange=function(){if(!n&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){n=true;e.onload=e.onreadystatechange=null;e.contentWindow.postMessage("script",b)}};d.body.appendChild(e)}+")(window,document,"+j+")").replace(/\s+/g," ")).click(function(a){a.preventDefault();alert("1. Drag this link to your bookmarks,\n2. Navigate to another page,\n3. Click the bookmarklet to add that page to your search engine.")});
h!==h.top&&i.location.hash==="#"+c&&h.addEventListener("message",function(a){a.data==="script"?a.source.postMessage("("+m.scanner+")(window,document)","*"):m.indexer(JSON.parse(a.data))},false)})(window,document,jQuery,window["10kse"]);
(function(h,i,f){if(f===f.top){h=h.get;f=h("COUNT")||0;var m,c;if(f>0)for(var o=i("<ul></ul>").appendTo(i(".entries").find("div").empty());f>0;){f--;m=h("ID-"+f);c=h("URL-"+m);i("<li><a></a></li>").find("a").attr("href",m).attr("title",c.title).text(c.title).end().appendTo(o)}}})(window["10kse"],jQuery,window);
(function(h,i){var f=h.get,m=i(".results dl"),c=i(".search input");i(function(){c.focus()});i("form").submit(function(o){o.preventDefault();var j=(c.val()||"").toLowerCase().split(/[^a-z0-9_]/),a,d,b,g;o={};var e={};a=0;for(d=j.length;a<d;a++){b=j[a].toLowerCase();if(b=e[b]||(e[b]=f("W-"+b)))for(g in b)o[g]+=1}m.empty();j=new RegExp("(.*?\\b)("+j.join("|")+")(\\b.*)");for(g in o){d=f("ID-"+g);e=f("URL-"+d);a=e.text;b=[];for(var n=0,k=0,l=a.match(j);l;){b[n++]=l[1];b[n++]=l[2];k+=l[1].length+l[2].length;
a=l[3];l=a.match(j);if(n>10||k>300)break}b[n++]=a;k=i("<dd></dd>");for(a=0;a<n;a++)if(a%2)k.append(i("<strong></strong>").text(b[a]));else{l=b[a];if(l.length>100)l=(a?l.substr(0,47):"")+" ... "+(a<n-1?l.substr(l.length-47):"");k.append(document.createTextNode(l))}m.append(i("<dt><a></a></dt>").find("a").attr("href",d).attr("title",e.title).text(e.title).end(),k)}})})(window["10kse"],jQuery);
