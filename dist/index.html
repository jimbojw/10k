<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>10k personal search engine</title>
<style type="text/css">.bookmarklet{font-size:2em;}</style>
</head>
<body>
<h1>10k personal search engine</h1>
<form>
<input type="text" name="search" />
</form>
<p class="bookmarklet">
<span>Bookmarklet: </span>
<a href="" title="Add to search engine" id="add">add</a>
</p>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>window["10kse"]={};
(function(j){j.scanner=function(k,l){function i(o,s){var p;if(o.currentStyle)p=o.currentStyle[s];else if(k.getComputedStyle)p=q.getComputedStyle(o,null).getPropertyValue(s);return p}var q=l.defaultView,d,e,a,f,b=l.getSelection(),c="h1,h2,h3,h4,h5,h6,pre,code".split(","),g=[],m,h;d=0;for(a=c.length;d<a;d++){m=l.getElementsByTagName(c[d]);e=0;for(f=m.length;e<f;e++){h=m[e];i(h,"display")!=="none"&&i(h,"visiblity")!=="hidden"&&g.push(h.textContent)}}e=[];f=[l.body];var n,r;c=/[a-z][a-z][a-z]/i;for(m=
/button|link|noscript|script|style/i;d=f.shift();){h=d.childNodes;d=0;for(a=h.length;d<a;d++){n=h[d];r=n.nodeType;if(r===1&&!m.test(n.tagName)&&i(n,"display")!=="none"&&i(n,"visibility")!=="hidden")f.push(n);else if(r===3){text=n.nodeValue;c.test(text)&&e.push(text)}}}k["10kse"].iframe.contentWindow.postMessage(JSON.stringify({selection:b,priority:g,content:e}),"*")}})(window["10kse"]);(function(j){j.indexer=function(){}})(window["10kse"]);
(function(j,k,l,i){function q(a,f){var b=new Date;b.setTime(b.getTime()+31536E7);k.cookie=a+"="+f+"; expires="+b.toGMTString()+"; path=/"}var d=k.location.href,e=function(a){a=a+"=";for(var f=k.cookie.split(";"),b,c=0,g=f.length;c<g;c++){for(b=f[c];b.charAt(0)===" ";)b=b.substr(1);if(b.indexOf(a)===0)return b.substr(a.length)}return null}("key");if(!e){e=Math.random();q("key",e)}d=JSON.stringify(d.replace(/#.*|$/,"#"+e));l("#add").attr("href",("javascript:("+function(a,f,b){var c=a["10kse"];c||(c=
a["10kse"]={});if(c.scanner)return c.scanner();a.addEventListener("message",function(h){if(b.substr(0,h.origin.length)===h.origin){c.scanner=new Function(h.data);c.scanner()}},false);var g=c.iframe=f.createElement("iframe");a=g.style;g.setAttribute("src",b);a.width=a.height="1px";a.top=a.left="-2px";a.border="none";a.position="absolute";var m=false;g.onload=g.onreadystatechange=function(){if(!m&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){m=true;g.onload=g.onreadystatechange=
null;g.contentWindow.postMessage("script",b)}};f.body.appendChild(g)}+")(window,document,"+d+")").replace(/\s+/g," ")).click(function(a){a.preventDefault();alert("1. Drag this link to your bookmarks,\n2. Navigate to another page,\n3. Click the bookmarklet to add that page to your search engine.")});j!==j.top&&k.location.hash==="#"+e&&j.addEventListener("message",function(a){a.data==="script"?a.source.postMessage("("+i.scanner+")(window,document)","*"):i.indexer(JSON.parse(a.data))},false)})(window,
document,jQuery,window["10kse"]);(function(j,k,l){l("form").submit(function(i){i.preventDefault()})})(window,document,jQuery);
</script>
</body>
</html>

