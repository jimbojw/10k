<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>10k personal search engine</title>
<style type="text/css">body{font-family:'Helvetica Neue',Arial,'Liberation Sans',FreeSans,sans-serif;width:600px;margin:0 auto;background:#eee;}h1{background:#036;color:white;padding:1em 0;font-size:2.5em;text-align:center;background-image:-moz-linear-gradient(center bottom,#1b4080 32%,#486bb3 72%);background-image:-webkit-gradient(linear,left bottom,left top,color-stop(0.32,#1b4080),color-stop(0.72,#486bb3));-moz-border-radius:8px;border-radius:8px;text-shadow:#333 1px 1px 1px;}dt{font-size:1.1em;margin-bottom:0;}dd{margin-left:0;margin-bottom:2.5em;}dd p{margin:1em 0;}a,a:visited{color:#06c;}input[type=text]{width:100%;border:1px solid #aaa;}form p{text-align:center;}.container>div{background:white;border:1px solid #aaa;margin-bottom:1em;padding:0 1em 1em;-moz-border-radius:8px;border-radius:8px;}ul{list-style-type:square;color:#06c;}li{margin-bottom:.5em;}#add{display:block;margin:1em auto;width:5em;background:#f30;color:white;padding:.5em;font-size:2.5em;text-align:center;background-image:-moz-linear-gradient(center bottom,#c92200 32%,#f30 72%);background-image:-webkit-gradient(linear,left bottom,left top,color-stop(0.32,#c92200),color-stop(0.72,#f30));-moz-border-radius:8px;border-radius:8px;text-shadow:#333 1px 1px 1px;text-decoration:none;}.auto{position:absolute;background:#fff;padding:0;margin:0;border:none;}.auto ul{margin:0;padding:0;list-style-type:none;border:1px solid #ccc;}.auto li{margin:0;padding:.25em .5em;}.auto .selected{background:#f0f0f0;}</style>
</head>
<body class="showgrid">
<!--html-->
<div class="container">
<h1><span>10k personal search engine<span></h1>
<div class="search">
<div>
<h2><span>Search</span></h2>
<form>
<p><input type="text" name="search" autocomplete="off" /></p>
<p><input type="submit" name="submit" value="Search" /></p>
</form>
</div>
<div class="results"><dl></dl></div>
</div>
<div class="bookmarklet">
<h2><span>Welcome</span></h2>
<p>The 'add' button below is a <a href="http://en.wikipedia.org/wiki/Bookmarklet" title="bookmarklet">bookmarklet</a>.</p>
<ol>
	<li>Drag it to your bookmarks toolbar or add it to your favorites.</li>
	<li>When you're on a page you want to add, click the bookmark.</li>
	<li>That page will now appear in your search results!</li>
</ol>
<p><a href="" title="Add to search engine" id="add"><span>add</span></a></p>
</div>
<div class="entries">
<h2><span>All pages</span></h2>
<div><p>none yet :/</p></div>
</div>
<div class="prefs">
<h2><span>Preferences</span></h2>
<p>TBD</p>
</div>
</div>
<!--/html-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>(function(l){var r=l.localStorage,j=l.JSON.stringify,m=l.JSON.parse;l=l["10kse"]={};for(var h="able|about|across|after|all|almost|also|among|and|any|are|because|been|but|can|cannot|could|dear|did|does|either|else|ever|every|for|from|get|got|had|has|have|her|hers|him|his|how|however|into|its|just|least|let|like|likely|may|might|most|must|neither|nor|not|off|often|only|other|our|own|rather|said|say|says|she|should|since|some|than|that|the|their|them|then|there|these|they|this|tis|too|twas|wants|was|were|what|when|where|which|while|who|whom|why|will|with|would|yet|you|your".split("|"),
k={},i=0,b=h.length;i<b;i++)k[h[i]]=true;l.asc=function(a,c){return a-c};l.get=function(a){return(a=r.getItem(a))?m(a):a};l.set=function(a,c){return r.setItem(a,j(c))};l.stop=k})(window);
(function(l){l.scanner=function(r,j,m){function h(s,y){var z;if(s.currentStyle)z=s.currentStyle[y];else if(r.getComputedStyle)z=b.getComputedStyle(s,null).getPropertyValue(y);return z}function k(s){return h(s,"display")!=="none"&&h(s,"visiblity")!=="hidden"}function i(s){var y=s.parentNode,z=y.parentNode,A=(s.innerText||s.textContent).replace(g," "),B=A.length;s=1;if(B>25){if(y[d]===m){y[d]=0;a[c++]=y}if(z[d]===m){z[d]=0;a[c++]=y}s+=A.split(",").length;A=B*0.01<<0;s+=A<4?A:3;y[d]+=s;z[d]+=s*0.5}}
var b=j.defaultView,a=[],c=0,d="10score",g=/\s+/g,e,f,o,u,p=j.getElementsByTagName("p");e=0;for(f=p.length;e<f;e++)i(p[e]);p=j.getElementsByTagName("div");var v,q=/<(a|blockquote|dl|div|img|ol|p|pre|table|ul|br)/i;e=0;for(f=p.length;e<f;e++){v=p[e];q.test(v.innerHTML)&&i(v)}q=null;var t;for(e=0;e<c;e++){f=a[e];p=f.getElementsByTagName("a");o=t=0;for(u=p.length;o<u;o++){v=p[o];t+=(v.innerText||v.textContent).length}f[d]=score=f[d]*(1-t/(f.innerText||f.textContent).length);if(!q||score>q[d])q=f}q=q||
j.body;p=j.getSelection()||"";t="h1,h2,h3,h4,h5,h6,pre,code".split(",");v=[];var x,n;e=0;for(f=t.length;e<f;e++){x=j.getElementsByTagName(t[e]);o=0;for(u=x.length;o<u;o++){n=x[o];k(n)&&v.push(n.textContent)}}o=[];q=[q];var w;u=/[a-z][a-z][a-z]/i;for(t=/button|link|noscript|script|style/i;f=q.shift();){x=f.childNodes;e=0;for(f=x.length;e<f;e++){n=x[e];w=n.nodeType;if(w===1&&!t.test(n.tagName)&&k(n))q[q.length]=n;else if(w===3){text=n.nodeValue;if(u.test(text))o[o.length]=text}}}r["10kse"].iframe.contentWindow.postMessage(JSON.stringify({url:j.location.href,
selection:p,title:j.title,priority:v.join(" "),content:o.join(" ")}),"*")}})(window["10kse"]);
(function(l){function r(b){var a,c,d,g=0,e,f={};c=b.split(k);b=0;for(a=c.length;b<a;b++){g++;d=c[b];e=d.toLowerCase();if(d.length>2&&!i[e]){(d=f[e])||(d=f[e]=[]);d[d.length]=g}}return f}function j(b,a,c){if((c=""+c)&&/[a-z]/i.test(c)){c=r(c);var d,g,e;for(d in c){g=m("W-"+d)||{};(e=g[b])||(e=g[b]={});e[a]=c[d];h("W-"+d,g)}}}var m=l.get,h=l.set,k=/[^0-9a-z_]+/i,i=l.stop;l.extract=r;l.indexer=function(b){var a,c=m("URL-"+b.url);if(c){a=c.id;if(b.content!==c.text||b.title!==c.title)h("URL-"+b.url,{id:a,
text:b.content,title:b.title})}else{a=m("COUNT")||0;h("ID-"+a,b.url);h("COUNT",a+1);h("URL-"+b.url,{id:a,text:b.content,title:b.title})}j(a,"s",b.selection);j(a,"t",b.title);j(a,"p",b.priority);j(a,"c",b.content)}})(window["10kse"],window);
(function(l,r,j,m){var h=m.get,k=m.set,i=r.location.href;h=h("K");if(!h){h=Math.random();k("K",h)}i=JSON.stringify(i.replace(/#.*|$/,"#"+h));k="javascript:("+(function(b,a,c){var d=b["10kse"];d||(d=b["10kse"]={});if(d.scanner)return d.scanner();b.addEventListener("message",function(f){if(c.substr(0,f.origin.length)===f.origin){d.scanner=new Function(f.data);d.scanner()}},false);var g=d.iframe=a.createElement("iframe");b=g.style;g.setAttribute("src",c);b.width=b.height="1px";b.top=b.left="-2px";b.border=
"none";b.position="absolute";var e=false;g.onload=g.onreadystatechange=function(){if(!e&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){e=true;g.onload=g.onreadystatechange=null;g.contentWindow.postMessage("script",c)}};a.body.appendChild(g)}+"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ")+")(window,document,"+i+")";j("#add").attr("href",k).click(function(b){b.preventDefault();alert("1. Drag this link to your bookmarks,\n2. Navigate to another page,\n3. Click the bookmarklet to add that page to your search engine.")});
l!==l.top&&r.location.hash==="#"+h&&l.addEventListener("message",function(b){b.data==="script"?b.source.postMessage("("+m.scanner+")(window,document)","*"):m.indexer(JSON.parse(b.data))},false)})(window,document,jQuery,window["10kse"]);
(function(l,r,j){if(j===j.top){l=l.get;j=l("COUNT")||0;var m,h;if(j>0)for(var k=r("<ul></ul>").appendTo(r(".entries").find("div").empty());j>0;){j--;m=l("ID-"+j);h=l("URL-"+m);r("<li><a></a></li>").find("a").attr("href",m).attr("title",h.title).text(h.title).end().appendTo(k)}}})(window["10kse"],jQuery,window);
(function(l,r){var j=l.get;l.wordcount=function(m,h,k,i){i||(i={});for(var b={},a,c,d,g=0,e=h.length;g<e;g++){a=h[g];if(a.length>2&&!stop[a]){c=i[a];if(c===r)c=i[a]=j("W-"+a);if(c)for(d in m)if(a=c[d])if(a=a[k]){if(b[d]===r)b[d]=0;b[d]+=+a.length}}}return b};l.normalize=function(m,h,k){if(h===r)h=1;if(k===r)k=0.5;var i={},b,a,c,d;for(b in m){d=i[b]=m[b]*h;if(a===r||d>a)a=d;if(c===r||d<c)c=d}if(a===c){for(b in i)i[b]=k;return i}for(b in i)i[b]=(i[b]-c)*(1/(a-c));return i};l.topdistance=function(m,
h,k,i){i||(i={});var b={},a,c,d,g;for(d in m){g=null;for(var e=0,f=h.length;e<f;e++){a=h[e];if(a.length>2&&!stop[a]){c=i[a];if(c===r)c=i[a]=j("W-"+a);if(c)if(a=c[d])if(a=a[k])if(g===null||a[0]<g)g=a[0]}}if(g!==null)b[d]=g}return b}})(window["10kse"]);
(function(l,r,j){var m=r("<div></div>");l.highlight=function(h,k,i){if(i===j)i=true;h=m.text(h).html();var b=h.toLowerCase(),a={},c={},d=[],g,e,f,o,u,p;g=0;for(e=k.length;g<e;g++){f=k[g].toLowerCase();o=f.length;if(o>2&&!a[f]){a[f]=true;for(p=u=0;u<3;){p=b.indexOf(f,p);if(p===-1)break;var v=h.charAt(p-1).toLowerCase(),q=h.charAt(p+o).toLowerCase();if((v<"a"||v>"z")&&(q<"a"||q>"z")){u++;d[d.length]=p;c[p]=f}p+=o}}}d.sort(l.asc);k=[];b=0;o=d.length;for(g=p=0;b<200&&g<=o;){a=d[g];f=g<o?h.substr(p,a-
p):h.substr(p);e=f.length;if(i)if(g===o){if(e>50)f=f.substr(0,46)+" ..."}else if(g===0){if(e>50)f="... "+f.substr(e-50-4)}else if(e>100)f=f.substr(0,47)+" ... "+f.substr(e-50-3);k[k.length]=f;b+=f.length;if(g<o){f=c[a];k[k.length]="<b>"+h.substr(a,f.length)+"</b>";b+=f.length;p=a+f.length}g++}if(b>=200&&g<=o)k[k.length]=" ...";return k.join("")}})(window["10kse"],jQuery);
(function(l,r){var j=l.localStorage,m,h;r.suggest=function(k){k=k.replace(/^\s+|\s$/g,"").toLowerCase();if(!k||!j.length)return[];var i;i=j.length;if(i!==h){h=i;m=[];for(var b=i=0;b<h;b++){var a=j.key(b);if(a.indexOf("W-")===0)m[i++]=a.substr(2)}m.sort()}i=m;b=i.length;a=0;for(var c=b-1,d;c-a>1;){d=a+(c-a>>1);if(i[d]<=k)a=d;else c=d}if(i[a].indexOf(k)===0)a=a;else if(i[c].indexOf(k)===0)a=c;else return[];for(b=a+16>b?b-1:a+15;i[b].indexOf(k)!==0;)b--;return i.slice(a,b+1)}})(window,window["10kse"]);
(function(l,r,j){function m(g){function e(){x(t);t=null;if(q){var n=q.text(),w=o.val(),s=w.lastIndexOf(" ")+1;o.get(0).value=v=w.substr(0,s)+n;q.removeClass(c);q=null}u.hide()}function f(){if(p.find("li").length){var n=o.offset();u.css({top:n.top+g.offsetHeight,left:n.left,width:g.offsetWidth});u.show()}}var o=j(g),u=j('<div class="auto"><ul></ul></div>').css({display:"none"}).appendTo(document.body),p=u.find("ul"),v="",q=null,t,x=l.clearTimeout;o.bind("change keyup",function(n){var w=o.val();n=n.which;
if(w!==v){v=w;n=w.lastIndexOf(" ");var s=w.substr(n<0?0:n).toLowerCase();if(s.length){t&&x(t);t=l.setTimeout(function(){x(t);t=null;var y=d(s);if(y&&y.length){p.empty();q=null;for(var z=0,A=y.length;z<A;z++)j("<li><span></span></li>").appendTo(p).find("span").html(y[z].split(s,2).join("<b>"+s+"</b>"));f()}else u.hide()},100)}else u.hide()}else if(n===h||n===i){if(q)if(n===h){w=q.prev();if(w.length){q.removeClass(c);q=w.addClass(c)}}else{w=q.next();if(w.length){q.removeClass(c);q=w.addClass(c)}}else q=
p.find("li").eq(0).addClass(c);f()}else if(n===b||n===k)e();else n===a&&u.hide()}).parent("form").submit(e);p.mouseover(function(n){n=j(n.target);n=n.is("li")?n:n.parent("li");if(n=n.length?n:null){q&&q.get(0)!==n.get(0)&&q.removeClass(c);q=n.addClass(c)}}).click(e)}var h=38,k=39,i=40,b=13,a=27,c="selected",d=r.suggest;j(".search input").each(function(){m(this)});r.autocomplete=m})(window,window["10kse"],jQuery);
(function(l,r,j,m){var h=j.get,k=m(".results dl"),i=m(".search input").eq(0);m("form").submit(function(b){b.preventDefault();var a=(i.val()||"").replace(/^\s+|\s+$/g,""),c=a.toLowerCase().split(/[^a-z0-9_]/),d,g;b={};var e,f={};if(a){d=0;for(g=c.length;d<g;d++){a=c[d];if(!f[a])if(a=f[a]=h("W-"+a))for(e in a)b[e]=(b[e]||0)+1}a=j.wordcount;var o=j.normalize,u=j.topdistance;b=[[1,o(b)],[1,o(a(b,c,"s",f))],[1,o(a(b,c,"t",f))],[1,o(a(b,c,"p",f))],[1,o(a(b,c,"c",f))],[1,o(u(b,c,"s",f),-1)],[1,o(u(b,c,"t",
f),-1)],[1,o(u(b,c,"p",f),-1)],[1,o(u(b,c,"c",f),-1)]];var p={};d=0;for(g=b.length;d<g;d++){a=b[d];f=a[0];a=a[1];for(e in a){p[e]||(p[e]=0);p[e]+=f*a[e]}}var v=[];b=0;var q={},t,x;for(e in p){t=p[e];x=q[t]||(q[t]=[]);x[x.length]=e;v[b++]=t}v.sort(j.asc);v.reverse();var n=j.highlight,w=null;k.slideUp("slow",function(){k.empty();d=0;for(g=v.length;d<g;d++){t=v[d];if(t!==w){w=t;x=q[t];for(var s=0,y=x.length;s<y;s++){e=x[s];var z=h("ID-"+e),A=h("URL-"+z),B=A.text;k.append(m("<dt><a></a></dt>").find("a").attr("href",
z).attr("title",A.title).html(n(A.title,c,false)).end(),m("<dd><p></p></dd>").find("p").html(n(B,c)).end().append("<p><strong>Score: "+(p[e]+"").substr(0,4)+"</strong></p>"))}}}k.slideDown("slow")})}});m(function(){i.focus()})})(window,document,window["10kse"],jQuery);
</script>
</body>
</html>

