<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>10k personal search engine</title>
<style type="text/css"></style>
</head>
<body>
<h1>10k personal search engine</h1>
<div class="search">
<h2><span>Search</span></h2>
<form><input type="text" name="search" /></form>
</div>
<div class="results">
<h2><span>Results</span></h2>
<div><dl></dl></div>
</div>
<div class="bookmarklet">
<h2><span>Bookmarklet</span></h2>
<p><a href="" title="Add to search engine" id="add"><span>add</span></a></p>
</div>
<div class="entries">
<h2><span>All pages</span></h2>
<div><p>none yet :/</p></div>
</div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>(function(l){var q=l.localStorage,h=l.JSON.stringify,j=l.JSON.parse;l=l["10kse"]={};for(var i="able|about|across|after|all|almost|also|among|and|any|are|because|been|but|can|cannot|could|dear|did|does|either|else|ever|every|for|from|get|got|had|has|have|her|hers|him|his|how|however|into|its|just|least|let|like|likely|may|might|most|must|neither|nor|not|off|often|only|other|our|own|rather|said|say|says|she|should|since|some|than|that|the|their|them|then|there|these|they|this|tis|too|twas|wants|was|were|what|when|where|which|while|who|whom|why|will|with|would|yet|you|your".split("|"),
n={},o=0,a=i.length;o<a;o++)n[i[o]]=true;l.get=function(c){return(c=q.getItem(c))?j(c):c};l.set=function(c,k){return q.setItem(c,h(k))};l.stop=n})(window);
(function(l){l.scanner=function(q,h,j){function i(r,x){var y;if(r.currentStyle)y=r.currentStyle[x];else if(q.getComputedStyle)y=a.getComputedStyle(r,null).getPropertyValue(x);return y}function n(r){return i(r,"display")!=="none"&&i(r,"visiblity")!=="hidden"}function o(r){var x=r.parentNode,y=x.parentNode,A=(r.innerText||r.textContent).replace(f," "),B=A.length;r=1;if(B>25){if(x[b]===j){x[b]=0;c[k++]=x}if(y[b]===j){y[b]=0;c[k++]=x}r+=A.split(",").length;A=B*0.01<<0;r+=A<4?A:3;x[b]+=r;y[b]+=r*0.5}}
var a=h.defaultView,c=[],k=0,b="10score",f=/\s+/g,d,e,s,u,m=h.getElementsByTagName("p");d=0;for(e=m.length;d<e;d++)o(m[d]);m=h.getElementsByTagName("div");var v,g=/<(a|blockquote|dl|div|img|ol|p|pre|table|ul|br)/i;d=0;for(e=m.length;d<e;d++){v=m[d];g.test(v.innerHTML)&&o(v)}g=null;var t;for(d=0;d<k;d++){e=c[d];m=e.getElementsByTagName("a");s=t=0;for(u=m.length;s<u;s++){v=m[s];t+=(v.innerText||v.textContent).length}e[b]=score=e[b]*(1-t/(e.innerText||e.textContent).length);if(!g||score>g[b])g=e}g=g||
h.body;m=h.getSelection()||"";t="h1,h2,h3,h4,h5,h6,pre,code".split(",");v=[];var w,p;d=0;for(e=t.length;d<e;d++){w=h.getElementsByTagName(t[d]);s=0;for(u=w.length;s<u;s++){p=w[s];n(p)&&v.push(p.textContent)}}s=[];g=[g];var z;u=/[a-z][a-z][a-z]/i;for(t=/button|link|noscript|script|style/i;e=g.shift();){w=e.childNodes;d=0;for(e=w.length;d<e;d++){p=w[d];z=p.nodeType;if(z===1&&!t.test(p.tagName)&&n(p))g[g.length]=p;else if(z===3){text=p.nodeValue;if(u.test(text))s[s.length]=text}}}q["10kse"].iframe.contentWindow.postMessage(JSON.stringify({url:h.location.href,
selection:m,title:h.title,priority:v.join(" "),content:s.join(" ")}),"*")}})(window["10kse"]);
(function(l){function q(a){var c,k,b,f=0,d,e={};k=a.split(n);a=0;for(c=k.length;a<c;a++){f++;b=k[a];d=b.toLowerCase();if(b.length>2&&!o[d]){(b=e[d])||(b=e[d]=[]);b[b.length]=f}}return e}function h(a,c,k){if(k&&/[a-z]/i.test(k)){k=q(k);var b,f,d;for(b in k){f=j("W-"+b)||{};(d=f[a])||(d=f[a]={});d[c]=k[b];i("W-"+b,f)}}}var j=l.get,i=l.set,n=/[^0-9a-z_]+/i,o=l.stop;l.extract=q;l.indexer=function(a){var c,k=j("URL-"+a.url);if(k){c=k.id;if(a.content!==k.text||a.title!==k.title)i("URL-"+a.url,{id:c,text:a.content,
title:a.title})}else{c=j("COUNT")||0;i("ID-"+c,a.url);i("COUNT",c+1);i("URL-"+a.url,{id:c,text:a.content,title:a.title})}h(c,"s",a.selection);h(c,"t",a.title);h(c,"p",a.priority);h(c,"c",a.content)}})(window["10kse"],window);
(function(l,q,h,j){var i=j.get,n=j.set,o=q.location.href;i=i("key");if(!i){i=Math.random();n("key",i)}o=JSON.stringify(o.replace(/#.*|$/,"#"+i));h("#add").attr("href",("javascript:("+function(a,c,k){var b=a["10kse"];b||(b=a["10kse"]={});if(b.scanner)return b.scanner();a.addEventListener("message",function(e){if(k.substr(0,e.origin.length)===e.origin){b.scanner=new Function(e.data);b.scanner()}},false);var f=b.iframe=c.createElement("iframe");a=f.style;f.setAttribute("src",k);a.width=a.height="1px";
a.top=a.left="-2px";a.border="none";a.position="absolute";var d=false;f.onload=f.onreadystatechange=function(){if(!d&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){d=true;f.onload=f.onreadystatechange=null;f.contentWindow.postMessage("script",k)}};c.body.appendChild(f)}+")(window,document,"+o+")").replace(/\s+/g," ")).click(function(a){a.preventDefault();alert("1. Drag this link to your bookmarks,\n2. Navigate to another page,\n3. Click the bookmarklet to add that page to your search engine.")});
l!==l.top&&q.location.hash==="#"+i&&l.addEventListener("message",function(a){a.data==="script"?a.source.postMessage("("+j.scanner+")(window,document)","*"):j.indexer(JSON.parse(a.data))},false)})(window,document,jQuery,window["10kse"]);
(function(l,q,h){if(h===h.top){l=l.get;h=l("COUNT")||0;var j,i;if(h>0)for(var n=q("<ul></ul>").appendTo(q(".entries").find("div").empty());h>0;){h--;j=l("ID-"+h);i=l("URL-"+j);q("<li><a></a></li>").find("a").attr("href",j).attr("title",i.title).text(i.title).end().appendTo(n)}}})(window["10kse"],jQuery,window);
(function(l,q){l.wordcount=function(h,j,i,n){n||(n={});for(var o={},a,c,k,b=0,f=j.length;b<f;b++){a=j[b];if(a.length>2&&!stop[a]){a=n[a]||(n[a]=get("W-"+a));for(c in h)if(k=a[c])if(k=k[i]){if(o[c]===q)o[c]=0;o[c]+=+k.length}}}return o};l.normalize=function(h,j){if(j===q)j=1;var i={},n,o,a,c;for(n in h){c=i[n]=h[n]*j;if(o===q||c>o)o=c;if(a===q||c<a)a=c}for(n in i)i[n]=(i[n]-a)*(1/(o-a));return i}})(window["10kse"]);
(function(l,q,h,j,i){function n(b,f,d){if(d===i)d=true;b=k.text(b).html();var e={},s={},u=[],m,v,g,t,w,p;m=0;for(v=f.length;m<v;m++){g=f[m];t=g.length;if(t>2&&!e[g]){e[g]=true;for(p=w=0;w<3;){p=b.indexOf(g,p);if(p===-1)break;var z=b.charAt(p-1).toLowerCase(),r=b.charAt(p+t).toLowerCase();if((z<"a"||z>"z")&&(r<"a"||r>"z")){w++;u[u.length]=p;s[p]=g}p+=t}}}u.sort();f=[];e=0;t=u.length;for(m=p=0;e<200&&m<=t;){v=u[m];g=m<t?b.substr(p,v-p):b.substr(p);w=g.length;if(d)if(m===0){if(w>50)g="... "+g.substr(w-
50-4)}else if(m===t){if(w>50)g=g.substr(0,46)+" ..."}else if(w>100)g=g.substr(0,47)+" ... "+g.substr(w-50-3);f[f.length]=g;e+=g.length;if(m<t){g=s[v];f[f.length]="<b>"+g+"</b>";e+=g.length;p=v+g.length}m++}if(e>=200)f[f.length]=" ...";return f.join("")}var o=h.get,a=j(".results dl"),c=j(".search input"),k=j("<div></div>");j("form").submit(function(b){b.preventDefault();b=(c.val()||"").toLowerCase().split(/[^a-z0-9_]/);var f,d,e,s={},u,m={};f=0;for(d=b.length;f<d;f++){e=b[f];if(!m[e])if(e=m[e]=o("W-"+
e))for(u in e)s[u]+=1}a.empty();for(u in s){f=o("ID-"+u);d=o("URL-"+f);m=d.text;a.append(j("<dt><a></a></dt>").find("a").attr("href",f).attr("title",d.title).text(n(d.title,b,false)).end(),j("<dd></dd>").html(n(m,b)))}});j(function(){c.focus()});h.highlight=n})(window,document,window["10kse"],jQuery);
</script>
</body>
</html>

